<!DOCTYPE html>
<html>
	<head>
	<title>我的个人简历</title>		
		<link rel="stylesheet" href="./loading.css">
		<link rel="stylesheet" href="./vendor/swiper.min.css">
		<link rel="stylesheet" href="./a.css">
		<script src="//at.alicdn.com/t/font_461366_hrpkdr8q7k384cxr.js"></script>
		<style type="text/css">
		
			.icon {
			   width: 1em; height: 1em;
			   vertical-align: -0.15em;
			   fill: currentColor;
			   overflow: hidden;
			}
			.site-welcome {
				display: none;
				position: fixed;
				top:0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 1;
				background: #888;
				justify-content: center;
				align-items: center;
			}
			.site-welcome.active {
				display:flex;
			}
		</style>
	</head>
	<body>
		<div id ="siteWelcome" class="site-welcome active">
				<div class="loading"></div>
		</div>
			
		<div id="topNavBar" class="topNavBar">
			<div class="topNavBar-inner clearfix">
					<a class="logo"href="#" alt="logo" style="float:left;">
							<span class="rs">RS</span><span class="card">card</span>
						</a>
					<nav  class = "menu" style="float:right;">
						<ul class="clearfix">
							<li ><a href="#siteAbout">关于</a></li>
							<li ><a href="#siteSkills">技能</a></li>
							<li>
									<!-- <li class="menuTigger"> -->
								<a  href="#siteWorks">作品</a>
								<ul class="submenu">
									<li>作品1</li>
									<li>作品2</li>
									<li>作品3</li>
								</ul>
							</li>
							<li>
									<!-- <li class="menuTigger"> -->
								<a  href="#">博客</a>
								<ul class="submenu">
										<li>博客1</li>
										<li>博客2</li>
										<li>博客3</li>
									</ul>
							</li>
							<li ><a href="#">日历</a></li>
							<li ><a href="#">联系方式</a></li>
							<li ><a href="#">其他</a></li>
						</ul>
					</nav>
			</div>
		</div>
<div class="banner">
	<div class="mask">

	</div>
</div>
<main >

	<div data-x id="siteAbout" class="userCard">
			<div class="pictureAndText clearfix">	
					<div class="picture">
							<img src="./img/avatar.jpg" width=299 height=347 alt="头像">
					</div>	
				<div class="text">
					<span class="welcome">HELLO
						<span class="triangle">

						</span>
					</span>
				<h1>陶思亮</h1>
				<p>前端开发工程师</p>
				<hr>
				<dl>
					<dt>年龄</dt>
					<dd>18</dd>
					<dt>所在城市</dt>
					<dd>武汉</dd>
					<dt>邮箱</dt>
					<dd>taosiliang1127tsl@163.com</dd>
					<dt>手机</dt>
					<dd>132xxxx4080</dd>
					<dt>到岗时间</dt>
					<dd>2018</dd>
				</dl>
		</div>
		</div>
	<footer class="media">
		<a href="#">
			<svg class="icon" aria-hidden="true">
				<use xlink:href="#icon-jianshu"></use>
			</svg>
		</a>
		<a href="#">
				<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-QQ"></use>
					</svg>
		</a>
		<a href="#">
				<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-weixin2"></use>
					</svg>	
		</a>
		<a href="#">
				<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-weibo"></use>
					</svg>	
		</a>
		<a href="#">
				<svg class="icon" aria-hidden="true">
						<use xlink:href="#icon-github"></use>
					</svg>	
		</a>
	</footer>
</div>
<p class="downloadResume-wrapper">
	<a class="downloadResume" href="./resume.pdf" target="_black" download>下载PDF简历</a>
</p>

<p class="selfIntroduction">
	陶思亮：前端开发工程师<br>
	技能：前端开发，Node.js开发
</p>
</main>
<section data-x id="siteSkills" class="skills">
	<h2>
		技能	
	</h2>	
	<ol class="clearfix">
		<li>
			<!-- <div style="padding-right:10px">			方法一 -->
			<h3>
					HTML5 &amp; CSS3
			</h3>
			<div class="progressBar">
				<div class="progress" style="width:20%">

				</div>		
			</div>
		<!-- </div> -->
		</li>

		<li>
				<h3>
						JavaScript
				</h3>
				<div class="progressBar">
					<div class="progress"style="width:30%">
	
					</div>
				</div>
				
			</li>

			<li>
					<h3>
							jQuery
					</h3>
					<div class="progressBar">
						<div class="progress"style="width:40%">
		
						</div>
					</div>
					
				</li>
				
				<li>
						<h3>
								Vue
						</h3>
						<div class="progressBar">
							<div class="progress"style="width:50%">
			
							</div>
						</div>
						
					</li>

					<li>
							<h3>
									React
							</h3>
							<div class="progressBar">
								<div class="progress" style="width:60%">
				
								</div>
							</div>
							
						</li>


						<li>
								<h3>
										HTTP
								</h3>
								<div class="progressBar">
									<div class="progress" style="width:70%">
					
									</div>
								</div>
								
							</li>						
	</ol>
</section>
<section data-x class="portfolio"  id="siteWorks"  >
	<h2>作品集</h2>			
				<!-- Slider main container -->
			<div class="swiper-container">
					<!-- Additional required wrapper -->
					<div class="swiper-wrapper">
						<!-- Slides -->
						<img src="./img/works/nav-page.jpg" class="swiper-slide">
						<img src="./img/works/canvas.jpg" class="swiper-slide">
						<img src="./img/works/apple-like-slides.jpg" class="swiper-slide">
					</div>
					<!-- If we need pagination -->
					<div class="swiper-pagination"></div>									
				 
					<!-- If we need scrollbar -->
					<!-- <div class="swiper-scrollbar"></div> -->
				</div>
				<!-- If we need navigation buttons -->
				<div class="swiper-button-prev"></div>
				<div class="swiper-button-next"></div>
			
	<!-- <div class="works">
		<div class="big" style="top:0px;left:0px">
			<img src="./img/1.jpg" alt="作品1">
		</div>
		<div class="small" style="top:0px;left:645px">
			<img src="./img/2.jpg" alt="作品2">
		</div>
		<div class="small" style="top:312px;left:645px">
			<img src="./img/3.jpg" alt="作品3">
			</div>		
	</div> -->
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
<script src="./vendor/swiper.min.js"></script>
<script>
	console.log(window.Swiper)
	var mySwiper = new Swiper ('.swiper-container', {
    // Optional parameters
    // direction: 'vertical',//垂直的不要
    loop: true,  //是否是无缝的

    // If we need pagination
    pagination: {
      el: '.swiper-pagination',   //是否需要分页器
    },

    // Navigation arrows
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },

    // And if we need scrollbar
    // scrollbar: {
    //   el: '.swiper-scrollbar',   //是否需要滚动条
    // },
  })
</script>
<script>  //前面的就是加载完了，把active类给删掉
	setTimeout(function(){
		siteWelcome.classList.remove('active')
	},1000)
	
//添加offset类	
let specialTags = document.querySelectorAll('[data-x]')
for(let i=0;i<specialTags.length;i++){
	specialTags[i].classList.add('offset')
}			
///////////////////////////
setTimeout(function(){
	findClosest()	
},1000)    //这里再先写一次findClosest函数，原因是为让第一个与后面2个特殊标记一样开始有效果（原始位置先下移100px，然后再
                                       //回到位置0）可以不需要延时（这里需要是因为被loading遮住了）

	window.onscroll = function(x){
		if(window.scrollY >0){
			topNavBar.classList.add('sticky')
		}else{
			topNavBar.classList.remove('sticky')
		}
		findClosest()
	}

	function findClosest(){
		let specialTags = document.querySelectorAll('[data-x]')
		let minIndex = 0
		for(let i=1;i<specialTags.length;i++){
		if(Math.abs(specialTags[i].offsetTop-window.scrollY)<Math.abs(specialTags[minIndex].offsetTop-window.scrollY)){
			minIndex = i   //哪一个与最上面的距离最小，就把哪一个找出来
			}
		}
		//minIndex就是离窗口顶部最近的元素
		specialTags[minIndex].classList.remove('offset')
		// console.log(minIndex)
		// for(let i =0;i<specialTags.length;i++){   //把所有的效果去掉
		// 	specialTags[i].classList.remove('active')
		// }
		// specialTags[minIndex].classList.add('active')  //只是在最小的地方加active
		let id = specialTags[minIndex].id
		// console.log(id)
		let a =document.querySelector('a[href="#'+ id +'"]')    //从div找到a标签
		//id =='siteAbout'   'a[href="#siteAbout"]'  
		let li = a.parentNode   //找到a标签的父亲
		let brothersAndMe = li.parentNode.children
		for(let i=0;i<brothersAndMe.length;i++)
		{
			brothersAndMe[i].classList.remove('highlight')
		}
		li.classList.add('highlight')
	}

	// let liTags = document.getElementsByClassName('menuTigger')
	let liTags = document.querySelectorAll('nav.menu >ul >li')
	for (let i = 0 ;i<liTags.length;i++){
		liTags[i].onmouseenter = function(x){
			// let li = 
			x.currentTarget.classList.add('active')
			// let brother = li.getElementsByTagName('ul')[0]
			// // while(brother.nodeType === Node.TEXT_NODE){  /*或者写成brother.tagName !== 'UL'*/
			// // 	brother = brother.nextSibling
			// // }
			// brother.classList.add('active')
			// console.log('brother')
		}
		liTags[i].onmouseleave = function(x){
			// let li = 
			x.currentTarget.classList.remove('active')
			// let brother = li.getElementsByTagName('ul')[0]
			// // while(brother.nodeType === Node.TEXT_NODE){  /*或者写成brother.tagName !== 'UL'*/
			// // 	brother = brother.nextSibling
			// // }
			// brother.classList.remove('active')
			// console.log('mouseleave')
		}
	}

let aTags = document.querySelectorAll('nav.menu >ul >li >a')

//调用了tween库，用缓动函数，实现缓动

function animate(time) {
    requestAnimationFrame(animate);
    TWEEN.update(time);
}
requestAnimationFrame(animate);

for(let i=0;i<aTags.length;i++){
	aTags[i].onclick = function(x){
		x.preventDefault()   //
		// let a = x.currentTarget
		// let href = a.getAttribute('href')  //'#siteAbout'
		// let element = document.querySelector(href)
		// let top = element.offsetTop
		let top = document.querySelector(x.currentTarget.getAttribute('href')).offsetTop
		//等于上面4句
		let currentTop = window.scrollY
		let targetTop =  top-80
		let s = targetTop - currentTop
		var coords = { y: currentTop }; 
		var t = Math.abs((s/100)*300)  //求绝对值

		if(t>500){
			t=500
		}
		var tween = new TWEEN.Tween(coords) 
        .to({ y: targetTop }, t) 
        .easing(TWEEN.Easing.Quadratic.InOut) //
        .onUpdate(function() {
          window.scrollTo(0,coords.y)
        })
        .start(); 
	}
}
</script>
	</body>
</html>
